=== Схема архитектуры решения

Оценка готовности архитектуры
[cols="2^8"]
|===

|Требование | Готовность | Пояснение

|Задержка < 500 мс (текст)| Высокая | Система использует WebSocket + REST должно обеспечить требуемое время
|Загрузка медиа до 2 ГБ | Работать будет но возможно забивание канала -требуется дорабоатьь | S3 поддерживает большие файлы, но не хватает балансировки и CDN.
|Задержка загрузки изображения < 1 сек | Высокая | С помощью предварительной подготовки изображения и CDN
|Воспроизведение видео < 1 сек | Не готово | Требуется реализовать стриминг.
|Масштабируемость (5000 DAU)| Высокая| Микросервисы и Kafka - масштабируются.
|99.9% доступность| Высокая | С помощью кластеризации, балансировки, мониторинга - возможно.
|RPO 5–30 мин | Необходимо доработать | Требуется резервное копирование мониторинг и восстановление.


Масштабирование в текущей архитектуре
[cols="2^8"]
|===
|Компонент | Масштабируемость 
|Api-gateway| Горизонтальное масштабирование путём добавления реплик, балансировщик распределяет по репликам
|Сервис чатов| CQRS
|Сервис медиа| горизонтальное масштабирование+S3+задействование CDN
|БД чатов| Шардирование по user_id, chat_id