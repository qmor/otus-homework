=== Observability
схема мониторинга и логирования

. Необходимо собирать логи со всех сервисов в ELK стек
. Все сервисы должны писать метрики в prometheus
. Испоьзуем graphana для отображения метрик
. Используем opensearch для отображения логов



какие метрики планируется собирать
. Время отклика API
. Количество пользователей
. Время выполнения запроса в БД
. Задержка передачи сообщения
. Количество запросов в секунду
. Количество сообщений в секунду	
. Использование CPU, RAM, диска
. Скорость увеличения обьема медиа контента
. Количество ошибок (5xx/4xx)
. Количество роликов в очереди на конвертацию
. Количество изображений в очереди на сохранение
. Обьемы хранимого медиа контента
. Время и статус последнего бэкапа



какой алертинг нужно настроить
. API Gateway: 5xx ошибок > 5%
. Лаги в топиках кафки, увеличение количества сообщений в DLQ
. События рестарта сервиса
. Длинные транзакции
. Большое потребление CPU/RAM/Диска
. Количество ошибок в логах больше 1 процента
. Несостоявшийся вовремя бэкап
. Превышение скорости увеличения обьема мелиа контента